{
    "id": "intermediaire_24_si_imbriques_mentions",
    "titre": "SI Imbriqu√©s : Attribution Automatique de Mentions",
    "niveau": "intermediaire",
    "duree_estimee": "25 min",
    "competences": ["SI imbriqu√©s", "Logique conditionnelle"],
    "competence_ids": [16],
  
    "contexte": {
      "situation": "Tu es assistant(e) administratif au lyc√©e Jean Moulin. Le proviseur te demande d'automatiser l'attribution des mentions au baccalaur√©at. Avec 450 √©l√®ves, impossible de faire √ßa √† la main !",
      "manager": {
        "nom": "M. Deschamps",
        "poste": "Proviseur",
        "personnalite": "Rigoureux et soucieux de l'√©quit√©. Il veut que chaque √©l√®ve ait la mention qu'il m√©rite, sans erreur.",
        "demande": "Les r√©sultats du bac arrivent demain. J'ai besoin d'un syst√®me automatique pour attribuer les mentions. Tu connais les seuils : Tr√®s Bien ‚â•16, Bien ‚â•14, Assez Bien ‚â•12, Passable ‚â•10, sinon Ajourn√©."
      },
      "enjeux": "450 √©l√®ves attendent leurs r√©sultats. Une erreur de mention serait catastrophique.",
      "deadline": "Demain 8h pour l'affichage"
    },
  
    "objectifs": [
      "Comprendre la logique des SI imbriqu√©s (conditions en cascade)",
      "Construire une formule avec plusieurs niveaux de SI",
      "G√©rer l'ordre des conditions (du plus restrictif au moins restrictif)",
      "√âviter les erreurs classiques (parenth√®ses, ordre)"
    ],
  
    "consignes": [
      "Ouvre le fichier avec les moyennes des √©l√®ves",
      "En colonne C, cr√©e une formule SI imbriqu√©e pour attribuer la mention",
      "Teste ta formule sur plusieurs cas limites (10, 12, 14, 16, 9.99)",
      "Recopie la formule pour tous les √©l√®ves",
      "V√©rifie les statistiques : combien d'√©l√®ves par mention ?"
    ],
  
    "donnees": {
      "feuille": "R√©sultats_Bac",
      "headers": ["Nom", "Moyenne", "Mention", "F√©licitations"],
      "rows": [
        ["Martin Alice", 17.5, null, null],
        ["Bernard Lucas", 14.2, null, null],
        ["Dubois Emma", 11.8, null, null],
        ["Thomas Hugo", 9.5, null, null],
        ["Robert L√©a", 16.0, null, null],
        ["Petit Nathan", 12.0, null, null],
        ["Durand Clara", 15.3, null, null],
        ["Leroy Th√©o", 8.2, null, null],
        ["Moreau Jade", 13.7, null, null],
        ["Simon Louis", 10.0, null, null],
        ["Laurent Chlo√©", 18.2, null, null],
        ["Michel Rapha√´l", 14.0, null, null],
        ["Garcia Manon", 11.2, null, null],
        ["Martinez Enzo", 16.8, null, null],
        ["Robinson Sarah", 9.9, null, null]
      ],
      "bareme": {
        "tres_bien": {"seuil": 16, "mention": "Tr√®s Bien"},
        "bien": {"seuil": 14, "mention": "Bien"},
        "assez_bien": {"seuil": 12, "mention": "Assez Bien"},
        "passable": {"seuil": 10, "mention": "Passable"},
        "ajourne": {"seuil": 0, "mention": "Ajourn√©"}
      }
    },
  
    "etapes": [
      {
        "phase": "A. Comprendre la logique",
        "explications": [
          "Un SI imbriqu√©, c'est un SI dans un SI. On teste plusieurs conditions en cascade.",
          "L'ordre est CRUCIAL : on teste d'abord la condition la plus haute (‚â•16), puis on descend.",
          "Si aucune condition n'est vraie, on tombe dans le dernier SINON."
        ],
        "schema": "SI moyenne ‚â• 16 ‚Üí 'Tr√®s Bien' SINON SI moyenne ‚â• 14 ‚Üí 'Bien' SINON SI moyenne ‚â• 12 ‚Üí 'Assez Bien' SINON SI moyenne ‚â• 10 ‚Üí 'Passable' SINON 'Ajourn√©'"
      },
      {
        "phase": "B. Construire la formule pas √† pas",
        "consignes": [
          "Commence simple : =SI(B2>=16;\"Tr√®s Bien\";\"Autre\")",
          "Remplace \"Autre\" par un nouveau SI : =SI(B2>=16;\"Tr√®s Bien\";SI(B2>=14;\"Bien\";\"Autre\"))",
          "Continue jusqu'√† avoir tous les cas",
          "Formule finale : =SI(B2>=16;\"Tr√®s Bien\";SI(B2>=14;\"Bien\";SI(B2>=12;\"Assez Bien\";SI(B2>=10;\"Passable\";\"Ajourn√©\"))))"
        ]
      },
      {
        "phase": "C. V√©rifier les cas limites",
        "consignes": [
          "10.0 ‚Üí doit donner 'Passable' (pas 'Ajourn√©')",
          "9.99 ‚Üí doit donner 'Ajourn√©'",
          "16.0 ‚Üí doit donner 'Tr√®s Bien' (pas 'Bien')",
          "12.0 ‚Üí doit donner 'Assez Bien'"
        ]
      },
      {
        "phase": "D. Bonus : F√©licitations du jury",
        "consignes": [
          "En colonne D, ajoute une formule pour les f√©licitations",
          "F√©licitations si moyenne ‚â• 18",
          "=SI(B2>=18;\"F√©licitations du jury\";\"\")"
        ]
      }
    ],
  
    "checkpoints": [
      {
        "id": "cp_1_tres_bien",
        "cellule": "C2",
        "type": "valeur",
        "description": "Mention Tr√®s Bien pour 17.5",
        "competence_id": 16,
        "expected_value": "Tr√®s Bien",
        "points": 15,
        "indices": [
          "17.5 ‚â• 16, donc c'est Tr√®s Bien",
          "=SI(B2>=16;\"Tr√®s Bien\";...)",
          "N'oublie pas les guillemets autour du texte"
        ]
      },
      {
        "id": "cp_2_bien",
        "cellule": "C3",
        "type": "valeur",
        "description": "Mention Bien pour 14.2",
        "competence_id": 16,
        "expected_value": "Bien",
        "points": 10,
        "indices": [
          "14.2 ‚â• 14 mais < 16, donc c'est Bien",
          "Le deuxi√®me SI doit tester >=14",
          "V√©rifie l'ordre de tes conditions"
        ]
      },
      {
        "id": "cp_3_assez_bien",
        "cellule": "C4",
        "type": "valeur",
        "description": "Mention Assez Bien pour 11.8",
        "competence_id": 16,
        "expected_value": "Assez Bien",
        "points": 10,
        "indices": [
          "11.8 ‚â• 12 ? Non ! 11.8 < 12",
          "Donc c'est Passable, pas Assez Bien",
          "V√©rifie : 11.8 >= 10 ‚Üí Passable"
        ]
      },
      {
        "id": "cp_4_ajourne",
        "cellule": "C5",
        "type": "valeur",
        "description": "Ajourn√© pour 9.5",
        "competence_id": 16,
        "expected_value": "Ajourn√©",
        "points": 10,
        "indices": [
          "9.5 < 10, donc Ajourn√©",
          "C'est le dernier SINON de ta formule",
          "Pas besoin de tester <10, c'est le cas par d√©faut"
        ]
      },
      {
        "id": "cp_5_cas_limite_16",
        "cellule": "C6",
        "type": "valeur",
        "description": "Cas limite : exactement 16.0",
        "competence_id": 16,
        "expected_value": "Tr√®s Bien",
        "points": 15,
        "indices": [
          "16.0 >= 16 est VRAI",
          "Donc c'est Tr√®s Bien, pas Bien",
          "Utilise >= et non > dans ta condition"
        ]
      },
      {
        "id": "cp_6_cas_limite_12",
        "cellule": "C7",
        "type": "valeur",
        "description": "Cas limite : exactement 12.0",
        "competence_id": 16,
        "expected_value": "Assez Bien",
        "points": 10,
        "indices": [
          "12.0 >= 12 est VRAI",
          "Donc Assez Bien",
          "Le >= inclut la valeur exacte"
        ]
      },
      {
        "id": "cp_7_cas_limite_10",
        "cellule": "C11",
        "type": "valeur",
        "description": "Cas limite : exactement 10.0",
        "competence_id": 16,
        "expected_value": "Passable",
        "points": 10,
        "indices": [
          "10.0 >= 10 est VRAI",
          "Donc Passable, pas Ajourn√©",
          "C'est la fronti√®re entre r√©ussite et √©chec"
        ]
      },
      {
        "id": "cp_8_formule_correcte",
        "cellule": "C2",
        "type": "formule",
        "description": "Formule SI imbriqu√©e correcte",
        "competence_id": 16,
        "fonction": "SI",
        "pattern": ["SI", "B2", "16", "14", "12", "10"],
        "points": 15,
        "indices": [
          "Ta formule doit contenir 4 SI imbriqu√©s",
          "Teste dans l'ordre : 16, 14, 12, 10",
          "=SI(B2>=16;\"Tr√®s Bien\";SI(B2>=14;\"Bien\";SI(B2>=12;\"Assez Bien\";SI(B2>=10;\"Passable\";\"Ajourn√©\"))))"
        ]
      },
      {
        "id": "cp_9_felicitations",
        "cellule": "D12",
        "type": "valeur",
        "description": "F√©licitations pour moyenne ‚â• 18",
        "competence_id": 9,
        "expected_value": "F√©licitations du jury",
        "points": 5,
        "indices": [
          "18.2 >= 18, donc f√©licitations",
          "=SI(B12>=18;\"F√©licitations du jury\";\"\")",
          "Cellule vide si pas de f√©licitations"
        ]
      }
    ],
  
    "erreurs_frequentes": [
      {
        "erreur": "Ordre des conditions invers√©",
        "exemple": "=SI(B2>=10;\"Passable\";SI(B2>=12;\"AB\";...))",
        "probleme": "Tout le monde aura 'Passable' car >=10 est test√© en premier",
        "solution": "Toujours du plus grand au plus petit : 16, 14, 12, 10"
      },
      {
        "erreur": "Parenth√®ses mal ferm√©es",
        "exemple": "=SI(B2>=16;\"TB\";SI(B2>=14;\"B\";\"Autre\")",
        "probleme": "Il manque des parenth√®ses √† la fin",
        "solution": "Compte : autant de SI que de parenth√®ses fermantes √† la fin"
      },
      {
        "erreur": "> au lieu de >=",
        "exemple": "=SI(B2>16;\"TB\";...)",
        "probleme": "Un √©l√®ve √† 16.0 n'aura pas Tr√®s Bien",
        "solution": "Utilise >= pour inclure la valeur limite"
      },
      {
        "erreur": "Guillemets manquants",
        "exemple": "=SI(B2>=16;Tr√®s Bien;...)",
        "probleme": "Excel cherche une cellule nomm√©e 'Tr√®s'",
        "solution": "Le texte doit √™tre entre guillemets : \"Tr√®s Bien\""
      }
    ],
  
    "scoring": {
      "total_points": 100,
      "seuil_reussite": 70,
      "seuil_maitrise": 90
    },
  
    "feedback_manager": {
      "succes": "Excellent ! Tu ma√Ætrises les SI imbriqu√©s. C'est une comp√©tence cl√© pour automatiser des d√©cisions complexes. Les 450 √©l√®ves auront leur mention correcte ! üéì",
      "partiel": "Tu as compris le principe. V√©rifie les cas limites (10, 12, 14, 16) et l'ordre de tes conditions.",
      "echec": "Les SI imbriqu√©s demandent de la rigueur. Reprends √©tape par √©tape : d'abord un SI simple, puis ajoute les autres un par un."
    },
  
    "socrate_message": {
      "intro": "Les SI imbriqu√©s, c'est comme un arbre de d√©cision : on pose une question, puis une autre, puis une autre... jusqu'√† trouver la bonne r√©ponse ! üå≥",
      "conclusion": "Tu sais maintenant cr√©er des formules de d√©cision complexes. Astuce pro : pour plus de 4-5 conditions, regarde du c√¥t√© de RECHERCHEV ou SWITCH ! üí°"
    },
  
    "metadata": {
      "version": "1.0",
      "created_at": "2026-01-21",
      "tags": ["SI imbriqu√©s", "conditions", "logique", "mentions", "bac", "interm√©diaire"],
      "prerequis": ["SI simple"],
      "ouvre_vers": ["SIERREUR", "SWITCH", "RECHERCHEV approch√©e"]
    }
  }